0001   0000             ; ===========================================================================
0002   0000             ; uz80as, an assembler for the Zilog Z80 and several other microprocessors.
0003   0000             ;
0004   0000             ; MOS Technology 6502.
0005   0000             ; ===========================================================================
0006   0000             
0007   0000             
0008   0000             #define equ .equ
0009   0000             #define end .end
0010   0000             
0011   0000             zp:	    equ $77
0012   0000             a16:        equ $1234
0013   0000             n:          equ 56h
0014   0000             
0015   0000             ; 0x
0016   0000             
0017   0000 00          	BRK
0018   0001 01 77       	ORA (zp,X)
0019   0003             	; 2
0020   0003             	; 3
0021   0003             	; 4
0022   0003 05 77       	ORA zp
0023   0005 06 77       	ASL zp
0024   0007 07 77       	RMB0 zp ; *
0025   0009 08          	PHP
0026   000A 09 56       	ORA #n
0027   000C 0A          	ASL A
0028   000D             	; B
0029   000D             	; C
0030   000D 0D 34 12    	ORA a16
0031   0010 0E 34 12    	ASL a16
0032   0013 0F 77 FD    	BBR0 zp,* ; *
0033   0016             
0034   0016             ; 1x
0035   0016             
0036   0016 10 FE       	BPL *
0037   0018 11 77       	ORA (zp),Y
0038   001A             	; 2
0039   001A             	; 3
0040   001A             	; 4
0041   001A 15 77       	ORA zp,X
0042   001C 16 77       	ASL zp,X
0043   001E 17 77       	RMB1 zp ; *
0044   0020 18          	CLC
0045   0021 19 34 12    	ORA a16,Y
0046   0024             	; A
0047   0024             	; B
0048   0024             	; C
0049   0024 1D 34 12    	ORA a16,X
0050   0027 1E 34 12    	ASL a16,X
0051   002A 1F 77 FD    	BBR1 zp,* ; *
0052   002D             	
0053   002D             ; 2x
0054   002D             
0055   002D 20 34 12    	JSR a16
0056   0030 21 77       	AND (zp,X)
0057   0032             	; 2
0058   0032             	; 3
0059   0032 24 77       	BIT zp
0060   0034 25 77       	AND zp
0061   0036 26 77       	ROL zp
0062   0038 27 77       	RMB2 zp ; *
0063   003A 28          	PLP
0064   003B 29 56       	AND #n
0065   003D 2A          	ROL A
0066   003E             	; B
0067   003E 2C 34 12    	BIT a16
0068   0041 2D 34 12    	AND a16
0069   0044 2E 34 12    	ROL a16
0070   0047 2F 77 FD    	BBR2 zp,* ; *
0071   004A             
0072   004A             ; 3x
0073   004A             
0074   004A 30 FE       	BMI *
0075   004C 31 77       	AND (zp),Y
0076   004E             	; 2
0077   004E             	; 3
0078   004E             	; 4
0079   004E 35 77       	AND zp,X
0080   0050 36 77       	ROL zp,X
0081   0052 37 77       	RMB3 zp ; *
0082   0054 38          	SEC
0083   0055 39 34 12    	AND a16,Y
0084   0058             	; A
0085   0058             	; B
0086   0058             	; C
0087   0058 3D 34 12    	AND a16,X
0088   005B 3E 34 12    	ROL a16,X
0089   005E 3F 77 FD    	BBR3 zp,* ; *
0090   0061             
0091   0061             ; 4x
0092   0061             
0093   0061 40          	RTI
0094   0062 41 77       	EOR (zp,X)
0095   0064             	; 2
0096   0064             	; 3
0097   0064             	; 4
0098   0064 45 77       	EOR zp
0099   0066 46 77       	LSR zp
0100   0068 47 77       	RMB4 zp ; *
0101   006A 48          	PHA
0102   006B 49 56       	EOR #n
0103   006D 4A          	LSR A
0104   006E             	; B
0105   006E 4C 34 12    	JMP a16
0106   0071 4D 34 12    	EOR a16
0107   0074 4E 34 12    	LSR a16
0108   0077 4F 77 FD    	BBR4 zp,* ; *
0109   007A             
0110   007A             ; 5x
0111   007A             
0112   007A 50 FE       	BVC *
0113   007C 51 77       	EOR (zp),Y
0114   007E             	; 2
0115   007E             	; 3
0116   007E             	; 4
0117   007E 55 77       	EOR zp,X
0118   0080 56 77       	LSR zp,X
0119   0082 57 77       	RMB5 zp ; *
0120   0084 58          	CLI
0121   0085 59 34 12    	EOR a16,Y
0122   0088             	; A
0123   0088             	; B
0124   0088             	; C
0125   0088 5D 34 12    	EOR a16,X
0126   008B 5E 34 12    	LSR a16,X
0127   008E 5F 77 FD    	BBR5 zp,* ; *
0128   0091             
0129   0091             ; 6x
0130   0091             
0131   0091 60          	RTS
0132   0092 61 77       	ADC (zp,X)
0133   0094             	; 2
0134   0094             	; 3
0135   0094             	; 4
0136   0094 65 77       	ADC zp
0137   0096 66 77       	ROR zp
0138   0098 67 77       	RMB6 zp ; *
0139   009A 68          	PLA
0140   009B 69 56       	ADC #n
0141   009D 6A          	ROR A
0142   009E             	; B
0143   009E 6C 34 12    	JMP (a16)
0144   00A1 6D 34 12    	ADC a16
0145   00A4 6E 34 12    	ROR a16
0146   00A7 6F 77 FD    	BBR6 zp,* ; *
0147   00AA             
0148   00AA             ; 7x
0149   00AA             
0150   00AA 70 FE       	BVS *
0151   00AC 71 77       	ADC (zp),Y
0152   00AE             	; 2
0153   00AE             	; 3
0154   00AE             	; 4
0155   00AE 75 77       	ADC zp,X
0156   00B0 76 77       	ROR zp,X
0157   00B2 77 77       	RMB7 zp ; *
0158   00B4 78          	SEI
0159   00B5 79 34 12    	ADC a16,Y
0160   00B8             	; A
0161   00B8             	; B
0162   00B8             	; C
0163   00B8 7D 34 12    	ADC a16,X
0164   00BB 7E 34 12    	ROR a16,X
0165   00BE 7F 77 FD    	BBR7 zp,* ; *
0166   00C1             
0167   00C1             ; 8x
0168   00C1             
0169   00C1             	; 0
0170   00C1 81 77       	STA (zp,X)
0171   00C3             	; 2
0172   00C3             	; 3
0173   00C3 84 77       	STY zp
0174   00C5 85 77       	STA zp
0175   00C7 86 77       	STX zp
0176   00C9 87 77       	SMB0 zp ; *
0177   00CB 88          	DEY
0178   00CC             	; 9
0179   00CC 8A          	TXA
0180   00CD             	; B
0181   00CD 8C 34 12    	STY a16
0182   00D0 8D 34 12    	STA a16
0183   00D3 8E 34 12    	STX a16
0184   00D6 8F 77 FD    	BBS0 zp,* ; *
0185   00D9             
0186   00D9             ; 9x
0187   00D9             
0188   00D9 90 FE       	BCC *
0189   00DB 91 77       	STA (zp),Y
0190   00DD             	; 2
0191   00DD             	; 3
0192   00DD 94 77       	STY zp,X
0193   00DF 95 77       	STA zp,X
0194   00E1 96 77       	STX zp,Y
0195   00E3 97 77       	SMB1 zp ; *
0196   00E5 98          	TYA
0197   00E6 99 34 12    	STA a16,Y
0198   00E9 9A          	TXS
0199   00EA             	; B
0200   00EA             	; C
0201   00EA 9D 34 12    	STA a16,X
0202   00ED             	; E
0203   00ED 9F 77 FD    	BBS1 zp,* ; *
0204   00F0             
0205   00F0             ; Ax
0206   00F0             
0207   00F0 A0 56       	LDY #n
0208   00F2 A1 77       	LDA (zp,X)
0209   00F4 A2 56       	LDX #n
0210   00F6             	; 3
0211   00F6 A4 77       	LDY zp
0212   00F8 A5 77       	LDA zp
0213   00FA A6 77       	LDX zp
0214   00FC A7 77       	SMB2 zp ; *
0215   00FE A8          	TAY
0216   00FF A9 56       	LDA #n
0217   0101 AA          	TAX
0218   0102             	; B
0219   0102 AC 34 12    	LDY a16
0220   0105 AD 34 12    	LDA a16
0221   0108 AE 34 12    	LDX a16
0222   010B AF 77 FD    	BBS2 zp,* ; *
0223   010E             
0224   010E             ; Bx
0225   010E             
0226   010E B0 FE       	BCS *
0227   0110 B1 77       	LDA (zp),Y
0228   0112             	; 2
0229   0112             	; 3
0230   0112 B4 77       	LDY zp,X
0231   0114 B5 77       	LDA zp,X
0232   0116 B6 77       	LDX zp,Y
0233   0118 B7 77       	SMB3 zp ; *
0234   011A B8          	CLV
0235   011B B9 34 12    	LDA a16,Y
0236   011E BA          	TSX
0237   011F             	; B
0238   011F BC 34 12    	LDY a16,X
0239   0122 BD 34 12    	LDA a16,X
0240   0125 BE 34 12    	LDX a16,Y
0241   0128 BF 77 FD    	BBS3 zp,* ; *
0242   012B             
0243   012B             ; Cx
0244   012B             
0245   012B C0 56       	CPY #n
0246   012D C1 77       	CMP (zp,X)
0247   012F             	; 2
0248   012F             	; 3
0249   012F C4 77       	CPY zp
0250   0131 C5 77       	CMP zp
0251   0133 C6 77       	DEC zp
0252   0135 C7 77       	SMB4 zp ; *
0253   0137 C8          	INY
0254   0138 C9 56       	CMP #n
0255   013A CA          	DEX
0256   013B             	; B
0257   013B CC 34 12    	CPY a16
0258   013E CD 34 12    	CMP a16
0259   0141 CE 34 12    	DEC a16
0260   0144 CF 77 FD    	BBS4 zp,* ; *
0261   0147             
0262   0147             ; Dx
0263   0147             
0264   0147 D0 FE       	BNE *
0265   0149 D1 77       	CMP (zp),Y
0266   014B             	; 2
0267   014B             	; 3
0268   014B             	; 4
0269   014B D5 77       	CMP zp,X
0270   014D D6 77       	DEC zp,X
0271   014F D7 77       	SMB5 zp ; *
0272   0151 D8          	CLD
0273   0152 D9 34 12    	CMP a16,Y
0274   0155             	; A
0275   0155             	; B
0276   0155             	; C
0277   0155 DD 34 12    	CMP a16,X
0278   0158 DE 34 12    	DEC a16,X
0279   015B DF 77 FD    	BBS5 zp,* ; *
0280   015E             
0281   015E             ; Ex
0282   015E             
0283   015E E0 56       	CPX #n
0284   0160 E1 77       	SBC (zp,X)
0285   0162             	; 2
0286   0162             	; 3
0287   0162 E4 77       	CPX zp
0288   0164 E5 77       	SBC zp
0289   0166 E6 77       	INC zp
0290   0168 E7 77       	SMB6 zp ; *
0291   016A E8          	INX
0292   016B E9 56       	SBC #n
0293   016D EA          	NOP
0294   016E             	; B
0295   016E EC 34 12    	CPX a16
0296   0171 ED 34 12    	SBC a16
0297   0174 EE 34 12    	INC a16
0298   0177 EF 77 FD    	BBS6 zp,* ; *
0299   017A             
0300   017A             ; Fx
0301   017A             
0302   017A F0 FE       	BEQ *
0303   017C F1 77       	SBC (zp),Y
0304   017E             	; 2
0305   017E             	; 3
0306   017E             	; 4
0307   017E F5 77       	SBC zp,X
0308   0180 F6 77       	INC zp,X
0309   0182 F7 77       	SMB7 zp ; *
0310   0184 F8          	SED
0311   0185 F9 34 12    	SBC a16,Y
0312   0188             	; A
0313   0188             	; B
0314   0188             	; C
0315   0188 FD 34 12    	SBC a16,X
0316   018B FE 34 12    	INC a16,X
0317   018E FF 77 FD    	BBS7 zp,* ; *
0318   0191             
0319   0191             ; Forcing 16 bits
0320   0191             ; 0x
0321   0191             
0322   0191             	; 1
0323   0191             	; 2
0324   0191             	; 2
0325   0191             	; 3
0326   0191             	; 4
0327   0191             	; 5
0328   0191             	; 6
0329   0191             	; 7
0330   0191             	; 8
0331   0191             	; 9
0332   0191             	; A
0333   0191             	; B
0334   0191             	; C
0335   0191 0D 77 00    	ORA >zp
0336   0194 0E 77 00    	ASL >zp
0337   0197             	; F
0338   0197             
0339   0197             ; 1x
0340   0197             
0341   0197             	; 0
0342   0197             	; 1
0343   0197             	; 2
0344   0197             	; 3
0345   0197             	; 4
0346   0197             	; 5
0347   0197             	; 6
0348   0197             	; 7
0349   0197             	; 8
0350   0197             	; 9
0351   0197             	; A
0352   0197             	; B
0353   0197             	; C
0354   0197 1D 77 00    	ORA >zp,X
0355   019A 1E 77 00    	ASL >zp,X
0356   019D             	; F
0357   019D             	
0358   019D             ; 2x
0359   019D             
0360   019D             	; 0
0361   019D             	; 1
0362   019D             	; 2
0363   019D             	; 3
0364   019D             	; 4
0365   019D             	; 5
0366   019D             	; 6
0367   019D             	; 7
0368   019D             	; 8
0369   019D             	; 9
0370   019D             	; A
0371   019D             	; B
0372   019D 2C 77 00    	BIT >zp
0373   01A0 2D 77 00    	AND >zp
0374   01A3 2E 77 00    	ROL >zp
0375   01A6             	; F
0376   01A6             
0377   01A6             ; 3x
0378   01A6             
0379   01A6             	; 0
0380   01A6             	; 1
0381   01A6             	; 2
0382   01A6             	; 3
0383   01A6             	; 4
0384   01A6             	; 5
0385   01A6             	; 6
0386   01A6             	; 7
0387   01A6             	; 8
0388   01A6             	; 9
0389   01A6             	; A
0390   01A6             	; B
0391   01A6             	; C
0392   01A6 3D 77 00    	AND >zp,X
0393   01A9 3E 77 00    	ROL >zp,X
0394   01AC             	; F
0395   01AC             
0396   01AC             ; 4x
0397   01AC             
0398   01AC             	; 1
0399   01AC             	; 2
0400   01AC             	; 2
0401   01AC             	; 3
0402   01AC             	; 4
0403   01AC             	; 5
0404   01AC             	; 6
0405   01AC             	; 7
0406   01AC             	; 8
0407   01AC             	; 9
0408   01AC             	; A
0409   01AC             	; B
0410   01AC             	; C
0411   01AC 4D 77 00    	EOR >zp
0412   01AF 4E 77 00    	LSR >zp
0413   01B2             	; F
0414   01B2             
0415   01B2             ; 5x
0416   01B2             
0417   01B2             	; 1
0418   01B2             	; 2
0419   01B2             	; 2
0420   01B2             	; 3
0421   01B2             	; 4
0422   01B2             	; 5
0423   01B2             	; 6
0424   01B2             	; 7
0425   01B2             	; 8
0426   01B2             	; 9
0427   01B2             	; A
0428   01B2             	; B
0429   01B2             	; C
0430   01B2 5D 77 00    	EOR >zp,X
0431   01B5 5E 77 00    	LSR >zp,X
0432   01B8             	; F
0433   01B8             
0434   01B8             ; 6x
0435   01B8             
0436   01B8             	; 1
0437   01B8             	; 2
0438   01B8             	; 2
0439   01B8             	; 3
0440   01B8             	; 4
0441   01B8             	; 5
0442   01B8             	; 6
0443   01B8             	; 7
0444   01B8             	; 8
0445   01B8             	; 9
0446   01B8             	; A
0447   01B8             	; B
0448   01B8             	; C
0449   01B8 6D 77 00    	ADC >zp
0450   01BB 6E 77 00    	ROR >zp
0451   01BE             	; F
0452   01BE             
0453   01BE             ; 7x
0454   01BE             
0455   01BE             	; 0
0456   01BE             	; 1
0457   01BE             	; 2
0458   01BE             	; 3
0459   01BE             	; 4
0460   01BE             	; 5
0461   01BE             	; 6
0462   01BE             	; 7
0463   01BE             	; 8
0464   01BE             	; 9
0465   01BE             	; A
0466   01BE             	; B
0467   01BE             	; C
0468   01BE 7D 77 00    	ADC >zp,X
0469   01C1 7E 77 00    	ROR >zp,X
0470   01C4             	; F
0471   01C4             
0472   01C4             ; 8x
0473   01C4             
0474   01C4             	; 0
0475   01C4             	; 1
0476   01C4             	; 2
0477   01C4             	; 3
0478   01C4             	; 4
0479   01C4             	; 5
0480   01C4             	; 6
0481   01C4             	; 7
0482   01C4             	; 8
0483   01C4             	; 9
0484   01C4             	; A
0485   01C4             	; B
0486   01C4 8C 77 00    	STY >zp
0487   01C7 8D 77 00    	STA >zp
0488   01CA 8E 77 00    	STX >zp
0489   01CD             	; F
0490   01CD             
0491   01CD             ; 9x
0492   01CD             
0493   01CD             	; 0
0494   01CD             	; 1
0495   01CD             	; 2
0496   01CD             	; 3
0497   01CD             	; 4
0498   01CD             	; 5
0499   01CD             	; 6
0500   01CD             	; 7
0501   01CD             	; 8
0502   01CD             	; 9
0503   01CD             	; A
0504   01CD             	; B
0505   01CD             	; C
0506   01CD 9D 77 00    	STA >zp,X
0507   01D0             	; E
0508   01D0             	; F
0509   01D0             
0510   01D0             ; Ax
0511   01D0             
0512   01D0             	; 0
0513   01D0             	; 1 
0514   01D0             	; 2
0515   01D0             	; 3
0516   01D0             	; 4
0517   01D0             	; 5
0518   01D0             	; 6
0519   01D0             	; 7
0520   01D0             	; 8
0521   01D0             	; 9
0522   01D0             	; A
0523   01D0             	; B
0524   01D0 AC 77 00    	LDY >zp
0525   01D3 AD 77 00    	LDA >zp
0526   01D6 AE 77 00    	LDX >zp
0527   01D9             	; F
0528   01D9             
0529   01D9             ; Bx
0530   01D9             
0531   01D9             	; 0
0532   01D9             	; 1
0533   01D9             	; 2
0534   01D9             	; 3
0535   01D9             	; 4
0536   01D9             	; 5
0537   01D9             	; 6
0538   01D9             	; 7
0539   01D9             	; 8
0540   01D9             	; 9
0541   01D9             	; A
0542   01D9             	; B
0543   01D9 BC 77 00    	LDY >zp,X
0544   01DC BD 77 00    	LDA >zp,X
0545   01DF BE 77 00    	LDX >zp,Y
0546   01E2             	; F
0547   01E2             
0548   01E2             ; Cx
0549   01E2             
0550   01E2             	; 0
0551   01E2             	; 1
0552   01E2             	; 2
0553   01E2             	; 3
0554   01E2             	; 4
0555   01E2             	; 5
0556   01E2             	; 6
0557   01E2             	; 7
0558   01E2             	; 8
0559   01E2             	; 9
0560   01E2             	; A
0561   01E2             	; B
0562   01E2 CC 77 00    	CPY >zp
0563   01E5 CD 77 00    	CMP >zp
0564   01E8 CE 77 00    	DEC >zp
0565   01EB             	; F
0566   01EB             
0567   01EB             ; Dx
0568   01EB             
0569   01EB             	; 0
0570   01EB             	; 1
0571   01EB             	; 2
0572   01EB             	; 3
0573   01EB             	; 4
0574   01EB             	; 5
0575   01EB             	; 6
0576   01EB             	; 7
0577   01EB             	; 8
0578   01EB             	; 9
0579   01EB             	; A
0580   01EB             	; B
0581   01EB             	; C
0582   01EB DD 77 00    	CMP >zp,X
0583   01EE DE 77 00    	DEC >zp,X
0584   01F1             	; F
0585   01F1             
0586   01F1             ; Ex
0587   01F1             
0588   01F1             	; 0
0589   01F1             	; 1
0590   01F1             	; 2
0591   01F1             	; 3
0592   01F1             	; 4
0593   01F1             	; 5
0594   01F1             	; 6
0595   01F1             	; 7
0596   01F1             	; 8
0597   01F1             	; 9
0598   01F1             	; A
0599   01F1             	; B
0600   01F1 EC 77 00    	CPX >zp
0601   01F4 ED 77 00    	SBC >zp
0602   01F7 EE 77 00    	INC >zp
0603   01FA             	; F
0604   01FA             
0605   01FA             ; Fx
0606   01FA             
0607   01FA             	; 0
0608   01FA             	; 1
0609   01FA             	; 2
0610   01FA             	; 3
0611   01FA             	; 4
0612   01FA             	; 5
0613   01FA             	; 6
0614   01FA             	; 7
0615   01FA             	; 8
0616   01FA             	; 9
0617   01FA             	; A
0618   01FA             	; B
0619   01FA             	; C
0620   01FA FD 77 00    	SBC >zp,X
0621   01FD FE 77 00    	INC >zp,X
0622   0200             	; F
0623   0200             
0624   0200             	end
