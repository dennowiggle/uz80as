0001   0000             ; ===========================================================================
0002   0000             ; uz80as, an assembler for the Zilog Z80 and several other microprocessors.
0003   0000             ;
0004   0000             ; Rockwell R65C00/21, R65C29.
0005   0000             ; ===========================================================================
0006   0000             
0007   0000             
0008   0000             #define equ .equ
0009   0000             #define end .end
0010   0000             
0011   0000             zp:	    equ $77
0012   0000             a16:        equ $1234
0013   0000             n:          equ 56h
0014   0000             
0015   0000             ; 0x
0016   0000             
0017   0000 00          	BRK
0018   0001 01 77       	ORA (zp,X)
0019   0003 02          	MUL ; *
0020   0004             	; 3
0021   0004 04 77       	TSB zp ; *
0022   0006 05 77       	ORA zp
0023   0008 06 77       	ASL zp
0024   000A 07          	RMB0 zp ; *
0025   000B 08          	PHP
0026   000C 09 56       	ORA #n
0027   000E 0A          	ASL A
0028   000F             	; B
0029   000F 0C 34 12    	TSB a16 ; *
0030   0012 0D 34 12    	ORA a16
0031   0015 0E 34 12    	ASL a16
0032   0018 0F 77 FE    b0f:	BBR0 zp,b0f ; *
0033   001B             
0034   001B             ; 1x
0035   001B             
0036   001B 10 FE       b10:	BPL b10
0037   001D 11 77       	ORA (zp),Y
0038   001F 12 77       	ORA (zp) ; *
0039   0021             	; 3
0040   0021 14 77       	TRB zp ; *
0041   0023 15 77       	ORA zp,X
0042   0025 16 77       	ASL zp,X
0043   0027 17          	RMB1 zp ; *
0044   0028 18          	CLC
0045   0029 19 34 12    	ORA a16,Y
0046   002C 1A          	INC A ; *
0047   002D             	; B
0048   002D 1C 34 12    	TRB a16 ; *
0049   0030 1D 34 12    	ORA a16,X
0050   0033 1E 34 12    	ASL a16,X
0051   0036 1F 77 FE    b1f:	BBR1 zp,b1f ; *
0052   0039             	
0053   0039             ; 2x
0054   0039             
0055   0039 20 34 12    	JSR a16
0056   003C 21 77       	AND (zp,X)
0057   003E             	; 2
0058   003E             	; 3
0059   003E 24 77       	BIT zp
0060   0040 25 77       	AND zp
0061   0042 26 77       	ROL zp
0062   0044 27          	RMB2 zp ; *
0063   0045 28          	PLP
0064   0046 29 56       	AND #n
0065   0048 2A          	ROL A
0066   0049             	; B
0067   0049 2C 34 12    	BIT a16
0068   004C 2D 34 12    	AND a16
0069   004F 2E 34 12    	ROL a16
0070   0052 2F 77 FE    b2f:	BBR2 zp,b2f ; *
0071   0055             
0072   0055             ; 3x
0073   0055             
0074   0055 30 FE       b30:	BMI b30
0075   0057 31 77       	AND (zp),Y
0076   0059 32 77       	AND (zp) ; *
0077   005B             	; 3
0078   005B 34 77       	BIT zp,X ; *
0079   005D 35 77       	AND zp,X
0080   005F 36 77       	ROL zp,X
0081   0061 37          	RMB3 zp ; *
0082   0062 38          	SEC
0083   0063 39 34 12    	AND a16,Y
0084   0066 3A          	DEC A ; *
0085   0067             	; B
0086   0067 3C 34 12    	BIT a16,X ; *
0087   006A 3D 34 12    	AND a16,X
0088   006D 3E 34 12    	ROL a16,X
0089   0070 3F 77 FE    b3f:	BBR3 zp,b3f ; *
0090   0073             
0091   0073             ; 4x
0092   0073             
0093   0073 40          	RTI
0094   0074 41 77       	EOR (zp,X)
0095   0076             	; 2
0096   0076             	; 3
0097   0076             	; 4
0098   0076 45 77       	EOR zp
0099   0078 46 77       	LSR zp
0100   007A 47          	RMB4 zp ; *
0101   007B 48          	PHA
0102   007C 49 56       	EOR #n
0103   007E 4A          	LSR A
0104   007F             	; B
0105   007F 4C 34 12    	JMP a16
0106   0082 4D 34 12    	EOR a16
0107   0085 4E 34 12    	LSR a16
0108   0088 4F 77 FE    b4f:	BBR4 zp,b4f ; *
0109   008B             
0110   008B             ; 5x
0111   008B             
0112   008B 50 FE       b50:	BVC b50
0113   008D 51 77       	EOR (zp),Y
0114   008F 52 77       	EOR (zp) ; *
0115   0091             	; 3
0116   0091             	; 4
0117   0091 55 77       	EOR zp,X
0118   0093 56 77       	LSR zp,X
0119   0095 57          	RMB5 zp ; *
0120   0096 58          	CLI
0121   0097 59 34 12    	EOR a16,Y
0122   009A 5A          	PHY ; *
0123   009B             	; B
0124   009B             	; C
0125   009B 5D 34 12    	EOR a16,X
0126   009E 5E 34 12    	LSR a16,X
0127   00A1 5F 77 FE    b5f:	BBR5 zp,b5f ; *
0128   00A4             
0129   00A4             ; 6x
0130   00A4             
0131   00A4 60          	RTS
0132   00A5 61 77       	ADC (zp,X)
0133   00A7             	; 2
0134   00A7             	; 3
0135   00A7 64 77       	STZ zp ; *
0136   00A9 65 77       	ADC zp
0137   00AB 66 77       	ROR zp
0138   00AD 67          	RMB6 zp ; *
0139   00AE 68          	PLA
0140   00AF 69 56       	ADC #n
0141   00B1 6A          	ROR A
0142   00B2             	; B
0143   00B2 6C 34 12    	JMP (a16)
0144   00B5 6D 34 12    	ADC a16
0145   00B8 6E 34 12    	ROR a16
0146   00BB 6F 77 FE    b6f:	BBR6 zp,b6f ; *
0147   00BE             
0148   00BE             ; 7x
0149   00BE             
0150   00BE 70 FE       b70:	BVS b70
0151   00C0 71 77       	ADC (zp),Y
0152   00C2 72 77       	ADC (zp) ; *
0153   00C4             	; 3
0154   00C4 74 77       	STZ zp,X ; *
0155   00C6 75 77       	ADC zp,X
0156   00C8 76 77       	ROR zp,X
0157   00CA 77          	RMB7 zp ; *
0158   00CB 78          	SEI
0159   00CC 79 34 12    	ADC a16,Y
0160   00CF 7A          	PLY ; *
0161   00D0             	; B
0162   00D0 52 34 12    	JMP (a16,X) ; *
0163   00D3 7D 34 12    	ADC a16,X
0164   00D6 7E 34 12    	ROR a16,X
0165   00D9 7F 77 FE    b7f:	BBR7 zp,b7f ; *
0166   00DC             
0167   00DC             ; 8x
0168   00DC             
0169   00DC 80 FE       b80:	BRA b80 ; *
0170   00DE 81 77       	STA (zp,X)
0171   00E0             	; 2
0172   00E0             	; 3
0173   00E0 84 77       	STY zp
0174   00E2 85 77       	STA zp
0175   00E4 86 77       	STX zp
0176   00E6 87          	SMB0 zp ; *
0177   00E7 88          	DEY
0178   00E8 89          	BIT #n ; *
0179   00E9 8A          	TXA
0180   00EA             	; B
0181   00EA 8C 34 12    	STY a16
0182   00ED 8D 34 12    	STA a16
0183   00F0 8E 34 12    	STX a16
0184   00F3 8F 77 FE    b8f:	BBS0 zp,b8f ; *
0185   00F6             
0186   00F6             ; 9x
0187   00F6             
0188   00F6 90 FE       b90:	BCC b90
0189   00F8 91 77       	STA (zp),Y
0190   00FA 92 77       	STA (zp) ; *
0191   00FC             	; 3
0192   00FC 94 77       	STY zp,X
0193   00FE 95 77       	STA zp,X
0194   0100 96 77       	STX zp,Y
0195   0102 97          	SMB1 zp ; *
0196   0103 98          	TYA
0197   0104 99 34 12    	STA a16,Y
0198   0107 9A          	TXS
0199   0108             	; B
0200   0108             	; C
0201   0108 9D 34 12    	STA a16,X
0202   010B 9E 34 12    	STZ a16,X ; *
0203   010E 9F 77 FE    b9f:	BBS1 zp,b9f ; *
0204   0111             
0205   0111             ; Ax
0206   0111             
0207   0111 A0 56       	LDY #n
0208   0113 A1 77       	LDA (zp,X)
0209   0115 A2 56       	LDX #n
0210   0117             	; 3
0211   0117 A4 77       	LDY zp
0212   0119 A5 77       	LDA zp
0213   011B A6 77       	LDX zp
0214   011D A7          	SMB2 zp ; *
0215   011E A8          	TAY
0216   011F A9 56       	LDA #n
0217   0121 AA          	TAX
0218   0122             	; B
0219   0122 AC 34 12    	LDY a16
0220   0125 AD 34 12    	LDA a16
0221   0128 AE 34 12    	LDX a16
0222   012B AF 77 FE    baf:	BBS2 zp,baf ; *
0223   012E             
0224   012E             ; Bx
0225   012E             
0226   012E B0 FE       bB0:	BCS bB0
0227   0130 B1 77       	LDA (zp),Y
0228   0132 B2 77       	LDA (zp) ; *
0229   0134             	; 3
0230   0134 B4 77       	LDY zp,X
0231   0136 B5 77       	LDA zp,X
0232   0138 B6 77       	LDX zp,Y
0233   013A B7          	SMB3 zp ; *
0234   013B B8          	CLV
0235   013C B9 34 12    	LDA a16,Y
0236   013F BA          	TSX
0237   0140             	; B
0238   0140 BC 34 12    	LDY a16,X
0239   0143 BD 34 12    	LDA a16,X
0240   0146 BE 34 12    	LDX a16,Y
0241   0149 BF 77 FE    bBF:	BBS3 zp,bBF ; *
0242   014C             
0243   014C             ; Cx
0244   014C             
0245   014C C0 56       	CPY #n
0246   014E C1 77       	CMP (zp,X)
0247   0150             	; 2
0248   0150             	; 3
0249   0150 C4 77       	CPY zp
0250   0152 C5 77       	CMP zp
0251   0154 E6 77       	DEC zp
0252   0156 C7          	SMB4 zp ; *
0253   0157 C8          	INY
0254   0158 C9 56       	CMP #n
0255   015A CA          	DEX
0256   015B             	; B
0257   015B CC 34 12    	CPY a16
0258   015E CD 34 12    	CMP a16
0259   0161 EE 34 12    	DEC a16
0260   0164 CF 77 FE    bCF:	BBS4 zp,bCF ; *
0261   0167             
0262   0167             ; Dx
0263   0167             
0264   0167 D0 FE       bD0:	BNE bD0
0265   0169 D1 77       	CMP (zp),Y
0266   016B D2 77       	CMP (zp) ; *
0267   016D             	; 3
0268   016D             	; 4
0269   016D D5 77       	CMP zp,X
0270   016F F6 77       	DEC zp,X
0271   0171 D7          	SMB5 zp ; *
0272   0172 D8          	CLD
0273   0173 D9 34 12    	CMP a16,Y
0274   0176 DA          	PHX ; *
0275   0177             	; B 
0276   0177             	; C
0277   0177 DD 34 12    	CMP a16,X
0278   017A FE 34 12    	DEC a16,X
0279   017D DF 77 FE    bDF:	BBS5 zp,bDF ; *
0280   0180             
0281   0180             ; Ex
0282   0180             
0283   0180 E0 56       	CPX #n
0284   0182 E1 77       	SBC (zp,X)
0285   0184             	; 2
0286   0184             	; 3
0287   0184 E4 77       	CPX zp
0288   0186 E5 77       	SBC zp
0289   0188 C6 77       	INC zp
0290   018A E7          	SMB6 zp ; *
0291   018B E8          	INX
0292   018C E9 56       	SBC #n
0293   018E EA          	NOP
0294   018F             	; B
0295   018F EC 34 12    	CPX a16
0296   0192 ED 34 12    	SBC a16
0297   0195 CE 34 12    	INC a16
0298   0198 EF 77 FE    bEF:	BBS6 zp,bEF ; *
0299   019B             
0300   019B             ; Fx
0301   019B             
0302   019B F0 FE       bF0:	BEQ bF0
0303   019D F1 77       	SBC (zp),Y
0304   019F F2 77       	SBC (zp) ; *
0305   01A1             	; 3
0306   01A1             	; 4
0307   01A1 F5 77       	SBC zp,X
0308   01A3 D6 77       	INC zp,X
0309   01A5 F7          	SMB7 zp ; *
0310   01A6 F8          	SED
0311   01A7 F9 34 12    	SBC a16,Y
0312   01AA FA          	PLX ; *
0313   01AB             	; B
0314   01AB             	; C
0315   01AB FD 34 12    	SBC a16,X
0316   01AE DE 34 12    	INC a16,X
0317   01B1 FF 77 FE    	BBS7 zp,* ; *
0318   01B4             
0319   01B4             	end
