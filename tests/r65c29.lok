0001   0000             ; ===========================================================================
0002   0000             ; uz80as, an assembler for the Zilog Z80 and several other microprocessors.
0003   0000             ;
0004   0000             ; Rockwell R65C00/21, R65C29.
0005   0000             ; ===========================================================================
0006   0000             
0007   0000             
0008   0000             #define equ .equ
0009   0000             #define end .end
0010   0000             
0011   0000             zp:	    equ $77
0012   0000             a16:        equ $1234
0013   0000             n:          equ 56h
0014   0000             
0015   0000             ; 0x
0016   0000             
0017   0000 00          	BRK
0018   0001 01 77       	ORA (zp,X)
0019   0003 02          	MUL ; *
0020   0004             	; 3
0021   0004 04 77       	TSB zp ; *
0022   0006 05 77       	ORA zp
0023   0008 06 77       	ASL zp
0024   000A 07 77       	RMB0 zp ; *
0025   000C 08          	PHP
0026   000D 09 56       	ORA #n
0027   000F 0A          	ASL A
0028   0010             	; B
0029   0010 0C 34 12    	TSB a16 ; *
0030   0013 0D 34 12    	ORA a16
0031   0016 0E 34 12    	ASL a16
0032   0019 0F 77 FD    	BBR0 zp,* ; *
0033   001C             
0034   001C             ; 1x
0035   001C             
0036   001C 10 FE       	BPL *
0037   001E 11 77       	ORA (zp),Y
0038   0020 12 77       	ORA (zp) ; *
0039   0022             	; 3
0040   0022 14 77       	TRB zp ; *
0041   0024 15 77       	ORA zp,X
0042   0026 16 77       	ASL zp,X
0043   0028 17 77       	RMB1 zp ; *
0044   002A 18          	CLC
0045   002B 19 34 12    	ORA a16,Y
0046   002E 1A          	INC A ; *
0047   002F             	; B
0048   002F 1C 34 12    	TRB a16 ; *
0049   0032 1D 34 12    	ORA a16,X
0050   0035 1E 34 12    	ASL a16,X
0051   0038 1F 77 FD    	BBR1 zp,* ; *
0052   003B             	
0053   003B             ; 2x
0054   003B             
0055   003B 20 34 12    	JSR a16
0056   003E 21 77       	AND (zp,X)
0057   0040             	; 2
0058   0040             	; 3
0059   0040 24 77       	BIT zp
0060   0042 25 77       	AND zp
0061   0044 26 77       	ROL zp
0062   0046 27 77       	RMB2 zp ; *
0063   0048 28          	PLP
0064   0049 29 56       	AND #n
0065   004B 2A          	ROL A
0066   004C             	; B
0067   004C 2C 34 12    	BIT a16
0068   004F 2D 34 12    	AND a16
0069   0052 2E 34 12    	ROL a16
0070   0055 2F 77 FD    	BBR2 zp,* ; *
0071   0058             
0072   0058             ; 3x
0073   0058             
0074   0058 30 FE       	BMI *
0075   005A 31 77       	AND (zp),Y
0076   005C 32 77       	AND (zp) ; *
0077   005E             	; 3
0078   005E 34 77       	BIT zp,X ; *
0079   0060 35 77       	AND zp,X
0080   0062 36 77       	ROL zp,X
0081   0064 37 77       	RMB3 zp ; *
0082   0066 38          	SEC
0083   0067 39 34 12    	AND a16,Y
0084   006A 3A          	DEC A ; *
0085   006B             	; B
0086   006B 3C 34 12    	BIT a16,X ; *
0087   006E 3D 34 12    	AND a16,X
0088   0071 3E 34 12    	ROL a16,X
0089   0074 3F 77 FD    	BBR3 zp,* ; *
0090   0077             
0091   0077             ; 4x
0092   0077             
0093   0077 40          	RTI
0094   0078 41 77       	EOR (zp,X)
0095   007A             	; 2
0096   007A             	; 3
0097   007A             	; 4
0098   007A 45 77       	EOR zp
0099   007C 46 77       	LSR zp
0100   007E 47 77       	RMB4 zp ; *
0101   0080 48          	PHA
0102   0081 49 56       	EOR #n
0103   0083 4A          	LSR A
0104   0084             	; B
0105   0084 4C 34 12    	JMP a16
0106   0087 4D 34 12    	EOR a16
0107   008A 4E 34 12    	LSR a16
0108   008D 4F 77 FD    	BBR4 zp,* ; *
0109   0090             
0110   0090             ; 5x
0111   0090             
0112   0090 50 FE       	BVC *
0113   0092 51 77       	EOR (zp),Y
0114   0094 52 77       	EOR (zp) ; *
0115   0096             	; 3
0116   0096             	; 4
0117   0096 55 77       	EOR zp,X
0118   0098 56 77       	LSR zp,X
0119   009A 57 77       	RMB5 zp ; *
0120   009C 58          	CLI
0121   009D 59 34 12    	EOR a16,Y
0122   00A0 5A          	PHY ; *
0123   00A1             	; B
0124   00A1             	; C
0125   00A1 5D 34 12    	EOR a16,X
0126   00A4 5E 34 12    	LSR a16,X
0127   00A7 5F 77 FD    	BBR5 zp,* ; *
0128   00AA             
0129   00AA             ; 6x
0130   00AA             
0131   00AA 60          	RTS
0132   00AB 61 77       	ADC (zp,X)
0133   00AD             	; 2
0134   00AD             	; 3
0135   00AD 64 77       	STZ zp ; *
0136   00AF 65 77       	ADC zp
0137   00B1 66 77       	ROR zp
0138   00B3 67 77       	RMB6 zp ; *
0139   00B5 68          	PLA
0140   00B6 69 56       	ADC #n
0141   00B8 6A          	ROR A
0142   00B9             	; B
0143   00B9 6C 34 12    	JMP (a16)
0144   00BC 6D 34 12    	ADC a16
0145   00BF 6E 34 12    	ROR a16
0146   00C2 6F 77 FD    	BBR6 zp,* ; *
0147   00C5             
0148   00C5             ; 7x
0149   00C5             
0150   00C5 70 FE       	BVS *
0151   00C7 71 77       	ADC (zp),Y
0152   00C9 72 77       	ADC (zp) ; *
0153   00CB             	; 3
0154   00CB 74 77       	STZ zp,X ; *
0155   00CD 75 77       	ADC zp,X
0156   00CF 76 77       	ROR zp,X
0157   00D1 77 77       	RMB7 zp ; *
0158   00D3 78          	SEI
0159   00D4 79 34 12    	ADC a16,Y
0160   00D7 7A          	PLY ; *
0161   00D8             	; B
0162   00D8 7C 34 12    	JMP (a16,X) ; *
0163   00DB 7D 34 12    	ADC a16,X
0164   00DE 7E 34 12    	ROR a16,X
0165   00E1 7F 77 FD    	BBR7 zp,* ; *
0166   00E4             
0167   00E4             ; 8x
0168   00E4             
0169   00E4 80 FE       	BRA * ; *
0170   00E6 81 77       	STA (zp,X)
0171   00E8             	; 2
0172   00E8             	; 3
0173   00E8 84 77       	STY zp
0174   00EA 85 77       	STA zp
0175   00EC 86 77       	STX zp
0176   00EE 87 77       	SMB0 zp ; *
0177   00F0 88          	DEY
0178   00F1 89 56       	BIT #n ; *
0179   00F3 8A          	TXA
0180   00F4             	; B
0181   00F4 8C 34 12    	STY a16
0182   00F7 8D 34 12    	STA a16
0183   00FA 8E 34 12    	STX a16
0184   00FD 8F 77 FD    	BBS0 zp,* ; *
0185   0100             
0186   0100             ; 9x
0187   0100             
0188   0100 90 FE       	BCC *
0189   0102 91 77       	STA (zp),Y
0190   0104 92 77       	STA (zp) ; *
0191   0106             	; 3
0192   0106 94 77       	STY zp,X
0193   0108 95 77       	STA zp,X
0194   010A 96 77       	STX zp,Y
0195   010C 97 77       	SMB1 zp ; *
0196   010E 98          	TYA
0197   010F 99 34 12    	STA a16,Y
0198   0112 9A          	TXS
0199   0113             	; B
0200   0113 9C 34 12    	STZ a16 ; *
0201   0116 9D 34 12    	STA a16,X
0202   0119 9E 34 12    	STZ a16,X ; *
0203   011C 9F 77 FD    	BBS1 zp,* ; *
0204   011F             
0205   011F             ; Ax
0206   011F             
0207   011F A0 56       	LDY #n
0208   0121 A1 77       	LDA (zp,X)
0209   0123 A2 56       	LDX #n
0210   0125             	; 3
0211   0125 A4 77       	LDY zp
0212   0127 A5 77       	LDA zp
0213   0129 A6 77       	LDX zp
0214   012B A7 77       	SMB2 zp ; *
0215   012D A8          	TAY
0216   012E A9 56       	LDA #n
0217   0130 AA          	TAX
0218   0131             	; B
0219   0131 AC 34 12    	LDY a16
0220   0134 AD 34 12    	LDA a16
0221   0137 AE 34 12    	LDX a16
0222   013A AF 77 FD    	BBS2 zp,* ; *
0223   013D             
0224   013D             ; Bx
0225   013D             
0226   013D B0 FE       	BCS * 
0227   013F B1 77       	LDA (zp),Y
0228   0141 B2 77       	LDA (zp) ; *
0229   0143             	; 3
0230   0143 B4 77       	LDY zp,X
0231   0145 B5 77       	LDA zp,X
0232   0147 B6 77       	LDX zp,Y
0233   0149 B7 77       	SMB3 zp ; *
0234   014B B8          	CLV
0235   014C B9 34 12    	LDA a16,Y
0236   014F BA          	TSX
0237   0150             	; B
0238   0150 BC 34 12    	LDY a16,X
0239   0153 BD 34 12    	LDA a16,X
0240   0156 BE 34 12    	LDX a16,Y
0241   0159 BF 77 FD    	BBS3 zp,* ; *
0242   015C             
0243   015C             ; Cx
0244   015C             
0245   015C C0 56       	CPY #n
0246   015E C1 77       	CMP (zp,X)
0247   0160             	; 2
0248   0160             	; 3
0249   0160 C4 77       	CPY zp
0250   0162 C5 77       	CMP zp
0251   0164 C6 77       	DEC zp
0252   0166 C7 77       	SMB4 zp ; *
0253   0168 C8          	INY
0254   0169 C9 56       	CMP #n
0255   016B CA          	DEX
0256   016C             	; B
0257   016C CC 34 12    	CPY a16
0258   016F CD 34 12    	CMP a16
0259   0172 CE 34 12    	DEC a16
0260   0175 CF 77 FD    	BBS4 zp,* ; *
0261   0178             
0262   0178             ; Dx
0263   0178             
0264   0178 D0 FE       	BNE *
0265   017A D1 77       	CMP (zp),Y
0266   017C D2 77       	CMP (zp) ; *
0267   017E             	; 3
0268   017E             	; 4
0269   017E D5 77       	CMP zp,X
0270   0180 D6 77       	DEC zp,X
0271   0182 D7 77       	SMB5 zp ; *
0272   0184 D8          	CLD
0273   0185 D9 34 12    	CMP a16,Y
0274   0188 DA          	PHX ; *
0275   0189             	; B 
0276   0189             	; C
0277   0189 DD 34 12    	CMP a16,X
0278   018C DE 34 12    	DEC a16,X
0279   018F DF 77 FD    	BBS5 zp,* ; *
0280   0192             
0281   0192             ; Ex
0282   0192             
0283   0192 E0 56       	CPX #n
0284   0194 E1 77       	SBC (zp,X)
0285   0196             	; 2
0286   0196             	; 3
0287   0196 E4 77       	CPX zp
0288   0198 E5 77       	SBC zp
0289   019A E6 77       	INC zp
0290   019C E7 77       	SMB6 zp ; *
0291   019E E8          	INX
0292   019F E9 56       	SBC #n
0293   01A1 EA          	NOP
0294   01A2             	; B
0295   01A2 EC 34 12    	CPX a16
0296   01A5 ED 34 12    	SBC a16
0297   01A8 EE 34 12    	INC a16
0298   01AB EF 77 FD    	BBS6 zp,* ; *
0299   01AE             
0300   01AE             ; Fx
0301   01AE             
0302   01AE F0 FE       	BEQ *
0303   01B0 F1 77       	SBC (zp),Y
0304   01B2 F2 77       	SBC (zp) ; *
0305   01B4             	; 3
0306   01B4             	; 4
0307   01B4 F5 77       	SBC zp,X
0308   01B6 F6 77       	INC zp,X
0309   01B8 F7 77       	SMB7 zp ; *
0310   01BA F8          	SED
0311   01BB F9 34 12    	SBC a16,Y
0312   01BE FA          	PLX ; *
0313   01BF             	; B
0314   01BF             	; C
0315   01BF FD 34 12    	SBC a16,X
0316   01C2 FE 34 12    	INC a16,X
0317   01C5 FF 77 FD    	BBS7 zp,* ; *
0318   01C8             
0319   01C8             ; Forcing 16 bits
0320   01C8             ; 0x
0321   01C8             
0322   01C8             	; 1
0323   01C8             	; 2
0324   01C8             	; 2
0325   01C8             	; 3
0326   01C8             	; 4
0327   01C8             	; 5
0328   01C8             	; 6
0329   01C8             	; 7
0330   01C8             	; 8
0331   01C8             	; 9
0332   01C8             	; A
0333   01C8             	; B
0334   01C8 0C 77 00    	TSB >zp ; *
0335   01CB 0D 77 00    	ORA >zp
0336   01CE 0E 77 00    	ASL >zp
0337   01D1             	; F
0338   01D1             
0339   01D1             ; 1x
0340   01D1             
0341   01D1             	; 0
0342   01D1             	; 1
0343   01D1             	; 2
0344   01D1             	; 3
0345   01D1             	; 4
0346   01D1             	; 5
0347   01D1             	; 6
0348   01D1             	; 7
0349   01D1             	; 8
0350   01D1             	; 9
0351   01D1             	; A
0352   01D1             	; B
0353   01D1 1C 77 00    	TRB >zp ; *
0354   01D4 1D 77 00    	ORA >zp,X
0355   01D7 1E 77 00    	ASL >zp,X
0356   01DA             	; F
0357   01DA             	
0358   01DA             ; 2x
0359   01DA             
0360   01DA             	; 0
0361   01DA             	; 1
0362   01DA             	; 2
0363   01DA             	; 3
0364   01DA             	; 4
0365   01DA             	; 5
0366   01DA             	; 6
0367   01DA             	; 7
0368   01DA             	; 8
0369   01DA             	; 9
0370   01DA             	; A
0371   01DA             	; B
0372   01DA 2C 77 00    	BIT >zp
0373   01DD 2D 77 00    	AND >zp
0374   01E0 2E 77 00    	ROL >zp
0375   01E3             	; F
0376   01E3             
0377   01E3             ; 3x
0378   01E3             
0379   01E3             	; 0
0380   01E3             	; 1
0381   01E3             	; 2
0382   01E3             	; 3
0383   01E3             	; 4
0384   01E3             	; 5
0385   01E3             	; 6
0386   01E3             	; 7
0387   01E3             	; 8
0388   01E3             	; 9
0389   01E3             	; A
0390   01E3             	; B
0391   01E3 3C 77 00    	BIT >zp,X ; *
0392   01E6 3D 77 00    	AND >zp,X
0393   01E9 3E 77 00    	ROL >zp,X
0394   01EC             	; F
0395   01EC             
0396   01EC             ; 4x
0397   01EC             
0398   01EC             	; 1
0399   01EC             	; 2
0400   01EC             	; 2
0401   01EC             	; 3
0402   01EC             	; 4
0403   01EC             	; 5
0404   01EC             	; 6
0405   01EC             	; 7
0406   01EC             	; 8
0407   01EC             	; 9
0408   01EC             	; A
0409   01EC             	; B
0410   01EC             	; C
0411   01EC 4D 77 00    	EOR >zp
0412   01EF 4E 77 00    	LSR >zp
0413   01F2             	; F
0414   01F2             
0415   01F2             ; 5x
0416   01F2             
0417   01F2             	; 1
0418   01F2             	; 2
0419   01F2             	; 2
0420   01F2             	; 3
0421   01F2             	; 4
0422   01F2             	; 5
0423   01F2             	; 6
0424   01F2             	; 7
0425   01F2             	; 8
0426   01F2             	; 9
0427   01F2             	; A
0428   01F2             	; B
0429   01F2             	; C
0430   01F2 5D 77 00    	EOR >zp,X
0431   01F5 5E 77 00    	LSR >zp,X
0432   01F8             	; F
0433   01F8             
0434   01F8             ; 6x
0435   01F8             
0436   01F8             	; 1
0437   01F8             	; 2
0438   01F8             	; 2
0439   01F8             	; 3
0440   01F8             	; 4
0441   01F8             	; 5
0442   01F8             	; 6
0443   01F8             	; 7
0444   01F8             	; 8
0445   01F8             	; 9
0446   01F8             	; A
0447   01F8             	; B
0448   01F8             	; C
0449   01F8 6D 77 00    	ADC >zp
0450   01FB 6E 77 00    	ROR >zp
0451   01FE             	; F
0452   01FE             
0453   01FE             ; 7x
0454   01FE             
0455   01FE             	; 0
0456   01FE             	; 1
0457   01FE             	; 2
0458   01FE             	; 3
0459   01FE             	; 4
0460   01FE             	; 5
0461   01FE             	; 6
0462   01FE             	; 7
0463   01FE             	; 8
0464   01FE             	; 9
0465   01FE             	; A
0466   01FE             	; B
0467   01FE             	; C
0468   01FE 7D 77 00    	ADC >zp,X
0469   0201 7E 77 00    	ROR >zp,X
0470   0204             	; F
0471   0204             
0472   0204             ; 8x
0473   0204             
0474   0204             	; 0
0475   0204             	; 1
0476   0204             	; 2
0477   0204             	; 3
0478   0204             	; 4
0479   0204             	; 5
0480   0204             	; 6
0481   0204             	; 7
0482   0204             	; 8
0483   0204             	; 9
0484   0204             	; A
0485   0204             	; B
0486   0204 8C 77 00    	STY >zp
0487   0207 8D 77 00    	STA >zp
0488   020A 8E 77 00    	STX >zp
0489   020D             	; F
0490   020D             
0491   020D             ; 9x
0492   020D             
0493   020D             	; 0
0494   020D             	; 1
0495   020D             	; 2
0496   020D             	; 3
0497   020D             	; 4
0498   020D             	; 5
0499   020D             	; 6
0500   020D             	; 7
0501   020D             	; 8
0502   020D             	; 9
0503   020D             	; A
0504   020D             	; B
0505   020D 9C 77 00    	STZ >zp ; *
0506   0210 9D 77 00    	STA >zp,X
0507   0213 9E 77 00    	STZ >zp,X ; *
0508   0216             	; F
0509   0216             
0510   0216             ; Ax
0511   0216             
0512   0216             	; 0
0513   0216             	; 1 
0514   0216             	; 2
0515   0216             	; 3
0516   0216             	; 4
0517   0216             	; 5
0518   0216             	; 6
0519   0216             	; 7
0520   0216             	; 8
0521   0216             	; 9
0522   0216             	; A
0523   0216             	; B
0524   0216 AC 77 00    	LDY >zp
0525   0219 AD 77 00    	LDA >zp
0526   021C AE 77 00    	LDX >zp
0527   021F             	; F
0528   021F             
0529   021F             ; Bx
0530   021F             
0531   021F             	; 0
0532   021F             	; 1
0533   021F             	; 2
0534   021F             	; 3
0535   021F             	; 4
0536   021F             	; 5
0537   021F             	; 6
0538   021F             	; 7
0539   021F             	; 8
0540   021F             	; 9
0541   021F             	; A
0542   021F             	; B
0543   021F BC 77 00    	LDY >zp,X
0544   0222 BD 77 00    	LDA >zp,X
0545   0225 BE 77 00    	LDX >zp,Y
0546   0228             	; F
0547   0228             
0548   0228             ; Cx
0549   0228             
0550   0228             	; 0
0551   0228             	; 1
0552   0228             	; 2
0553   0228             	; 3
0554   0228             	; 4
0555   0228             	; 5
0556   0228             	; 6
0557   0228             	; 7
0558   0228             	; 8
0559   0228             	; 9
0560   0228             	; A
0561   0228             	; B
0562   0228 CC 77 00    	CPY >zp
0563   022B CD 77 00    	CMP >zp
0564   022E CE 77 00    	DEC >zp
0565   0231             	; F
0566   0231             
0567   0231             ; Dx
0568   0231             
0569   0231             	; 0
0570   0231             	; 1
0571   0231             	; 2
0572   0231             	; 3
0573   0231             	; 4
0574   0231             	; 5
0575   0231             	; 6
0576   0231             	; 7
0577   0231             	; 8
0578   0231             	; 9
0579   0231             	; A
0580   0231             	; B
0581   0231             	; C
0582   0231 DD 77 00    	CMP >zp,X
0583   0234 DE 77 00    	DEC >zp,X
0584   0237             	; F
0585   0237             
0586   0237             ; Ex
0587   0237             
0588   0237             	; 0
0589   0237             	; 1
0590   0237             	; 2
0591   0237             	; 3
0592   0237             	; 4
0593   0237             	; 5
0594   0237             	; 6
0595   0237             	; 7
0596   0237             	; 8
0597   0237             	; 9
0598   0237             	; A
0599   0237             	; B
0600   0237 EC 77 00    	CPX >zp
0601   023A ED 77 00    	SBC >zp
0602   023D EE 77 00    	INC >zp
0603   0240             	; F
0604   0240             
0605   0240             ; Fx
0606   0240             
0607   0240             	; 0
0608   0240             	; 1
0609   0240             	; 2
0610   0240             	; 3
0611   0240             	; 4
0612   0240             	; 5
0613   0240             	; 6
0614   0240             	; 7
0615   0240             	; 8
0616   0240             	; 9
0617   0240             	; A
0618   0240             	; B
0619   0240             	; C
0620   0240 FD 77 00    	SBC >zp,X
0621   0243 FE 77 00    	INC >zp,X
0622   0246             	; F
0623   0246             
0624   0246             	end
